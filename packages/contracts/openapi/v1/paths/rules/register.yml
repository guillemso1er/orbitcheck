tags:
  - Management API
summary: Register custom rules
description: Registers new custom validation rules for the project
operationId: registerCustomRules
security:
  - patAuth: []
  - sessionCookie: []
requestBody:
  required: true
  content:
    application/json:
      schema:
        type: object
        required:
          - rules
        properties:
          rules:
            type: array
            description: Array of custom rules to register
            items:
              type: object
              required:
                - name
              properties:
                id:
                  type: string
                  description: Optional rule ID (UUID format). If provided, will update existing rule if found.
                name:
                  type: string
                  description: Custom rule name
                description:
                  type: string
                  description: Rule description
                condition:
                  type: string
                  description: A string containing the rule's logic expression.
                logic:
                  type: string
                  description: A string containing the rule's logic expression (alias for condition).
                conditions:
                  type: object
                  description: A structured JSON object defining the rule's logic.
                  additionalProperties: true
                severity:
                  type: string
                  enum: [low, medium, high, critical]
                  default: medium
                  description: Rule severity
                enabled:
                  type: boolean
                  default: true
                  description: Whether the rule is enabled
                action:
                  type: string
                  enum: [approve, hold, block]
                  description: Action to take when the rule is triggered
                actions:
                  type: object
                  description: Actions object (legacy format)
                  properties:
                    block:
                      type: boolean
                    approve:
                      type: boolean
                    hold:
                      type: boolean
                priority:
                  type: number
                  default: 0
                  description: Rule priority (higher values = higher priority)
                metadata:
                  type: object
                  additionalProperties: true
                  description: Additional metadata for the rule
responses:
  '201':
    description: Custom rules registered successfully
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              description: Success message
            updated_rules:
              type: array
              items:
                type: string
              description: List of updated rule IDs
            registered_rules:
              type: array
              items:
                type: string
              description: List of newly created rule IDs
            request_id:
              type: string
  '400':
    description: Invalid rule definitions
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/Error.yml'
  '401':
    description: Unauthorized
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/Error.yml'