---
import Footer from '../components/Footer.astro';
import Head from '../components/Head.astro';
import AnnouncementBars from '../components/AnnouncementBars.astro';
import Header from '../components/Header.astro';
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
  canonical?: string;
  ogImage?: string;
  noIndex?: boolean;
}

const {
  title = 'Stop Failed Deliveries & Save 30-60% on Shipping | Orbitcheck',
  description = 'Orbitcheck validates addresses, phones, emails, and tax IDs globally. Reduce failed deliveries by up to 60% and cut shipping costs.',
  canonical = 'https://orbitcheck.io',
  ogImage = 'https://orbitcheck.io/og-cover.png',
  noIndex = false,
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <Head
    title={title}
    description={description}
    canonical={canonical}
    ogImage={ogImage}
    noIndex={noIndex}
  />
  <body
    class="bg-gray-50 text-gray-900 antialiased dark:bg-gray-900 dark:text-gray-100"
  >
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Announcement Bars -->
    <AnnouncementBars />

    <!-- Header -->
    <Header />

    <!-- Main Content -->
    <main id="main-content">
      <slot />
    </main>

    <Footer />

    <!-- Scripts -->
    <script>
      import {
        initAnimations,
        initCopyrightYear,
        initFAQKeyboard,
        initSmoothScroll,
      } from '../scripts/animations';
      import { initMobileMenu } from '../scripts/mobile-menu';
      import { initROICalculator } from '../scripts/roi-calculator';
      import { initTheme } from '../scripts/theme';

      console.log('Layout script starting...');

      // Initialize all functionality
      try {
        initCopyrightYear();
        console.log('Copyright initialized');
      } catch (e) { console.error('Error initializing copyright:', e); }

      try {
        initMobileMenu();
        console.log('Mobile menu initialized');
      } catch (e) { console.error('Error initializing mobile menu:', e); }

      try {
        initTheme();
        console.log('Theme initialized (called)');
      } catch (e) { console.error('Error initializing theme:', e); }

      try {
        initROICalculator();
        console.log('ROI Calculator initialized');
      } catch (e) { console.error('Error initializing ROI calculator:', e); }

      try {
        initAnimations();
        console.log('Animations initialized');
      } catch (e) { console.error('Error initializing animations:', e); }

      try {
        initSmoothScroll();
        console.log('Smooth scroll initialized');
      } catch (e) { console.error('Error initializing smooth scroll:', e); }

      try {
        initFAQKeyboard();
        console.log('FAQ keyboard initialized');
      } catch (e) { console.error('Error initializing FAQ keyboard:', e); }
      
      console.log('Layout script finished');
    </script>
  </body>
</html>
