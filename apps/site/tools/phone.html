<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>E.164 Formatter — Orbicheck</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/common.css" />
</head>

<body class="bg-gray-50 text-gray-900 antialiased">
    <main class="container py-12">
        <h1 class="text-3xl font-extrabold">E.164 Phone Formatter</h1>
        <p class="mt-2 text-gray-700">Lightweight normalizer for global phone numbers. For authoritative parsing, use
            the API.</p>
        <form class="bg-white border border-gray-100 rounded-lg p-6 mt-6" onsubmit="return false">
            <label for="num" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
            <input id="num" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="(600) 123-456">
            <label for="cc" class="block text-sm font-medium text-gray-700 mb-1 mt-4">Country code</label>
            <select id="cc" class="w-full border border-gray-300 rounded-md px-3 py-2">
                <option value="">Auto (if leading + or 00)</option>
                <option value="34">Spain (+34)</option>
                <option value="55">Brazil (+55)</option>
                <option value="52">Mexico (+52)</option>
                <option value="54">Argentina (+54)</option>
                <option value="56">Chile (+56)</option>
                <option value="57">Colombia (+57)</option>
                <option value="351">Portugal (+351)</option>
                <option value="33">France (+33)</option>
                <option value="49">Germany (+49)</option>
                <option value="44">UK (+44)</option>
                <option value="1">US/CA (+1)</option>
            </select>
            <button id="fmt"
                class="mt-4 inline-flex items-center px-4 py-2 rounded-md bg-indigo-600 text-white">Format</button>
            <div id="out" class="mt-4 text-sm text-gray-800"></div>
            <noscript>
                <div class="mt-4 text-sm text-gray-700">
                    JavaScript disabled. Use the API:
                    <pre><code>curl -s https://api.orbicheck.com/v1/validate/phone \
  -H "Authorization: Bearer YOUR_KEY" \
  -H "Content-Type: application/json" \
  -d '{ "phone": "(600) 123-456", "country": "ES" }'
</code></pre>
                </div>
            </noscript>
        </form>
    </main>

    <script>
        (function () {
            var fmt = document.getElementById('fmt');
            if (!fmt) return;
            function normalize(num, cc) {
                var s = (num || '').toString().trim();
                s = s.replace(/[^\d+]/g, '');
                if (s.startsWith('+')) return '+' + s.replace(/[^\d]/g, '');
                if (s.startsWith('00')) return '+' + s.slice(2).replace(/[^\d]/g, '');
                var digits = s.replace(/\D/g, '');
                if (!cc) return '⚠️ Add country code or prefix with + or 00';
                return '+' + cc + digits;
            }
            fmt.addEventListener('click', function () {
                var num = document.getElementById('num').value;
                var cc = document.getElementById('cc').value;
                var out = document.getElementById('out');
                var e164 = normalize(num, cc);
                out.innerHTML = 'Result: <code>' + e164 + '</code>';
            });
        })();
    </script>
</body>

</html>